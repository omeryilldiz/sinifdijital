{% extends "admin_layout.html" %}
{% block content %}

<div class="container py-4">
    <h3 class="mb-3">
        <i class="bi bi-envelope-paper me-2"></i>Ã–ÄŸrenciye Mesaj GÃ¶nder
    </h3>
    
    <!-- Ã–ÄŸrenci Bilgileri -->
    <div class="card mb-4">
        <div class="card-header bg-light">
            <strong>AlÄ±cÄ± Ã–ÄŸrenci Bilgileri</strong>
        </div>
        <div class="card-body">
            <div class="row">
                <div class="col-md-6">
                    <p class="mb-1"><strong>Ã–ÄŸrenci AdÄ±:</strong> {{ student.first_name }} {{ student.last_name }}</p>
                    <p class="mb-1"><strong>KullanÄ±cÄ± AdÄ±:</strong> {{ student.username }}</p>
                </div>
                <div class="col-md-6">
                    <p class="mb-1"><strong>SÄ±nÄ±f:</strong> {{ student.class_no }}{% if student.class_name %}-{{ student.class_name }}{% endif %}</p>
                    <p class="mb-1"><strong>Okul:</strong> {% if student.school %}{{ student.school.name }}{% else %}BelirtilmemiÅŸ{% endif %}</p>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Mesaj Formu -->
    <div class="card">
        <div class="card-header bg-light">
            <strong>Mesaj Bilgileri</strong>
        </div>
        <div class="card-body">
            <form method="POST" action="{{ url_for('admin_send_message', student_id=student.id) }}">
                <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                
                <div class="row mb-3">
                    <div class="col-md-8">
                        <div class="form-group mb-3">
                            <label for="subject" class="form-label">Mesaj BaÅŸlÄ±ÄŸÄ±</label>
                            <input type="text" class="form-control" id="subject" name="subject" placeholder="Mesaj baÅŸlÄ±ÄŸÄ±nÄ± yazÄ±nÄ±z..." required>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group mb-3">
                            <label for="message_type" class="form-label">Mesaj Kategorisi</label>
                            <select class="form-select" id="message_type" name="message_type">
                                <option value="info" selected>ğŸ“ Bilgilendirme</option>
                                <option value="warning">âš ï¸ UyarÄ±</option>
                                <option value="success">ğŸ‰ Tebrik/BaÅŸarÄ±</option>
                                <option value="announcement">ğŸ“¢ Duyuru</option>
                                <option value="homework">ğŸ“š Ã–dev</option>
                                <option value="exam">ğŸ“ SÄ±nav</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <div class="form-group mb-4">
                    <label for="content" class="form-label">Mesaj Ä°Ã§eriÄŸi</label>
                    <textarea class="form-control" id="content" name="content" rows="6" placeholder="Mesaj iÃ§eriÄŸini yazÄ±nÄ±z..." required maxlength="2000"></textarea>
                    <div class="form-text text-muted">Mesaj iÃ§eriÄŸi en az 10 karakter, en fazla 2000 karakter olmalÄ±dÄ±r.</div>
                </div>
                
                <div class="d-flex justify-content-between">
                    <a href="{{ url_for('admin_student_detail', student_id=student.id) }}" class="btn btn-secondary">
                        <i class="bi bi-arrow-left me-1"></i> Ã–ÄŸrenci SayfasÄ±na DÃ¶n
                    </a>
                    <button type="submit" class="btn btn-primary">
                        <i class="bi bi-send me-1"></i> MesajÄ± GÃ¶nder
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

{% endblock %}