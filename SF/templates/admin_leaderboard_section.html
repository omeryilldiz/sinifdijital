{% if leaderboard %}

<!-- ðŸŽ¯ FÄ°LTRELEME BUTONLARI -->
<div class="leaderboard-filters mb-4">
    <!-- Kapsam Filtreleri -->
    <div class="scope-filters mb-3">
        <div class="btn-group w-100" role="group">
            <button type="button" class="btn btn-outline-primary active" data-scope="general">
                <i class="bi bi-globe me-1"></i>Genel
            </button>
            <button type="button" class="btn btn-outline-primary" data-scope="school">
                <i class="bi bi-building me-1"></i>Okul
            </button>
            <button type="button" class="btn btn-outline-primary" data-scope="class">
                <i class="bi bi-mortarboard me-1"></i>SÄ±nÄ±f
            </button>
        </div>
    </div>
    
    <!-- Zaman Filtreleri -->
    <div class="time-filters">
        <div class="btn-group w-100" role="group">
            <button type="button" class="btn btn-outline-secondary active" data-time="daily">
                <i class="bi bi-calendar-day me-1"></i>GÃ¼nlÃ¼k
            </button>
            <button type="button" class="btn btn-outline-secondary" data-time="weekly">
                <i class="bi bi-calendar-week me-1"></i>HaftalÄ±k
            </button>
            <button type="button" class="btn btn-outline-secondary" data-time="monthly">
                <i class="bi bi-calendar-month me-1"></i>AylÄ±k
            </button>
            <button type="button" class="btn btn-outline-secondary" data-time="alltime">
                <i class="bi bi-infinity me-1"></i>TÃ¼m Zamanlar
            </button>
        </div>
    </div>
</div>

<!-- ðŸ”„ LOADING GÃ–STERGESÄ° -->
<div class="loading-container d-none text-center py-4">
    <div class="spinner-border text-primary" role="status">
        <span class="visually-hidden">YÃ¼kleniyor...</span>
    </div>
    <p class="mt-2 text-muted">SÄ±ralama verisi yÃ¼kleniyor...</p>
</div>

<!-- ðŸ“Š Ä°Ã‡ERÄ°K ALANI (Tek Div) -->
<div class="leaderboard-content">
    
    <!-- Ä°lk yÃ¼kleme: GÃ¼nlÃ¼k Genel -->
    {% if leaderboard.daily and leaderboard.daily.general %}
        {% set scope_data = leaderboard.daily.general %}
        {% set period_title = 'GÃ¼nlÃ¼k Genel SÄ±ralama' %}
        {% set period_icon = 'calendar-day' %}
        {% include 'leaderboard_table.html' %}
    {% else %}
        {% set period_title = 'GÃ¼nlÃ¼k Genel SÄ±ralama' %}
        {% set empty_message = 'Bu gÃ¼n iÃ§in genel sÄ±ralama verisi bulunamadÄ±.' %}
        {% include 'leaderboard_empty.html' %}
    {% endif %}
    
</div>

<!-- ðŸ—‚ï¸ GÄ°ZLÄ° VERÄ° DEPOSU (JavaScript iÃ§in) -->
<script type="application/json" id="leaderboard-data">
{
    "daily": {
        "general": {% if leaderboard.daily and leaderboard.daily.general %}{{ leaderboard.daily.general | tojson }}{% else %}null{% endif %},
        "school": {% if leaderboard.daily and leaderboard.daily.school %}{{ leaderboard.daily.school | tojson }}{% else %}null{% endif %},
        "class": {% if leaderboard.daily and leaderboard.daily.class %}{{ leaderboard.daily.class | tojson }}{% else %}null{% endif %}
    },
    "weekly": {
        "general": {% if leaderboard.weekly and leaderboard.weekly.general %}{{ leaderboard.weekly.general | tojson }}{% else %}null{% endif %},
        "school": {% if leaderboard.weekly and leaderboard.weekly.school %}{{ leaderboard.weekly.school | tojson }}{% else %}null{% endif %},
        "class": {% if leaderboard.weekly and leaderboard.weekly.class %}{{ leaderboard.weekly.class | tojson }}{% else %}null{% endif %}
    },
    "monthly": {
        "general": {% if leaderboard.monthly and leaderboard.monthly.general %}{{ leaderboard.monthly.general | tojson }}{% else %}null{% endif %},
        "school": {% if leaderboard.monthly and leaderboard.monthly.school %}{{ leaderboard.monthly.school | tojson }}{% else %}null{% endif %},
        "class": {% if leaderboard.monthly and leaderboard.monthly.class %}{{ leaderboard.monthly.class | tojson }}{% else %}null{% endif %}
    },
    "alltime": {
        "general": {% if leaderboard.all_time and leaderboard.all_time.general %}{{ leaderboard.all_time.general | tojson }}{% else %}null{% endif %},
        "school": {% if leaderboard.all_time and leaderboard.all_time.school %}{{ leaderboard.all_time.school | tojson }}{% else %}null{% endif %},
        "class": {% if leaderboard.all_time and leaderboard.all_time.class %}{{ leaderboard.all_time.class | tojson }}{% else %}null{% endif %}
    },
    "student": {{ student_json | tojson }}
}
</script>

{% else %}
<!-- HiÃ§ leaderboard verisi yoksa -->
<div class="text-center py-5">
    <i class="bi bi-list-ol display-4 text-muted"></i>
    <h5 class="mt-3">SÄ±ralama Verisi BulunamadÄ±</h5>
    <p class="text-muted">Bu Ã¶ÄŸrenci iÃ§in henÃ¼z sÄ±ralama verisi oluÅŸturulmamÄ±ÅŸ.</p>
</div>
{% endif %}